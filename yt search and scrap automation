import time
import json
from selenium import webdriver
from selenium.webdriver import Keys
from selenium.webdriver.common.by import By
from selenium.webdriver.support import expected_conditions as EC

driver = webdriver.Chrome()
try:
    driver = webdriver.Chrome()
    driver.get('http://www.youtube.com')
    driver.maximize_window()
    time.sleep(1)
    search = driver.find_element(By.XPATH,'//input[@id="search"]')
    searchBTN = driver.find_element(By.XPATH,'//*[@id="search-icon-legacy"]')
    searchQuery="python automation and scrapping using selenium" #input()
    search.send_keys(searchQuery)
    time.sleep(2)
    searchBTN.send_keys(Keys.RETURN)
    time.sleep(5)
    searchResults = driver.find_elements(By.CSS_SELECTOR,value='.ytd-item-section-renderer ytd-video-renderer h3 a yt-formatted-string')
    searchResultsLinks = driver.find_elements(By.CSS_SELECTOR,value='.ytd-item-section-renderer ytd-video-renderer h3 a')
    keys=[]
    values=[]
    for searchResult in searchResults:
        keys.append(searchResult.text)
    for searchResultLink in searchResultsLinks:
        values.append(searchResultLink.get_attribute("href"))
    merged_dict = dict(zip(keys, values))
    with open('file.txt', 'w') as file:
        file.write(json.dumps(merged_dict))
    print("Successfully written in a file, Page title is:", driver.title)
except:
    print("some error")
    driver.quit()
finally:
    driver.quit()
